{
    "ConfigVersion": "0.0.1",
    "ConfigName": "FlexRayDemoNetSim",
    "Description": "Sample configuration for FlexRay with NetworkSimulator",

    "SimulationSetup": {

        "Participants": [
            {
                "Name": "Node0",
                "IsSyncMaster": true,
                "Logger": {
                    "Sinks": [
                        {
                            "Type": "Remote"
                        }
                    ]
                },

                "ParticipantController": {
                    "SyncType": "DiscreteTime"
                },
                "FlexRayControllers": [
                    {
                        "Name": "FlexRay1",
                        "ClusterParameters": {
                            "gColdstartAttempts": 8,
                            "gCycleCountMax": 63,
                            "gdActionPointOffset": 2,
                            "gdDynamicSlotIdlePhase": 1,
                            "gdMiniSlot": 5,
                            "gdMiniSlotActionPointOffset": 2,
                            "gdStaticSlot": 31,
                            "gdSymbolWindow": 1,
                            "gdSymbolWindowActionPointOffset": 1,
                            "gdTSSTransmitter": 9,
                            "gdWakeupTxActive": 60,
                            "gdWakeupTxIdle": 180,
                            "gListenNoise": 2,
                            "gMacroPerCycle": 3636,
                            "gMaxWithoutClockCorrectionFatal": 2,
                            "gMaxWithoutClockCorrectionPassive": 2,
                            "gNumberOfMiniSlots": 291,
                            "gNumberOfStaticSlots": 70,
                            "gPayloadLengthStatic": 16,
                            "gSyncFrameIDCountMax": 15
                        },
                        "NodeParameters": {
                            "pAllowHaltDueToClock": 1,
                            "pAllowPassiveToActive": 0,
                            "pChannels": "AB",
                            "pClusterDriftDamping": 2,
                            "pdAcceptedStartupRange": 212,
                            "pdListenTimeout": 400162,
                            "pKeySlotId": 10,
                            "pKeySlotOnlyEnabled": 0,
                            "pKeySlotUsedForStartup": 1,
                            "pKeySlotUsedForSync": 0,
                            "pLatestTx": 249,
                            "pMacroInitialOffsetA": 3,
                            "pMacroInitialOffsetB": 3,
                            "pMicroInitialOffsetA": 6,
                            "pMicroInitialOffsetB": 6,
                            "pMicroPerCycle": 200000,
                            "pOffsetCorrectionOut": 127,
                            "pOffsetCorrectionStart": 3632,
                            "pRateCorrectionOut": 81,
                            "pWakeupChannel": "A",
                            "pWakeupPattern": 33,
                            "pdMicrotick": "25ns",
                            "pSamplesPerMicrotick": 2
                        }
                    }
                ]
            },
            {
                "Name": "Node1",

                "Logger": {
                    "FlushLevel": "Warn",
                    "Sinks": [
                        {
                            "Type": "Remote"
                        }
                    ]
                },
                "ParticipantController": {
                    "SyncType": "DiscreteTime"
                },
                "FlexRayControllers": [
                    {
                        "Name": "FlexRay1",
                        "ClusterParameters": {
                            "gColdstartAttempts": 8,
                            "gCycleCountMax": 63,
                            "gdActionPointOffset": 2,
                            "gdDynamicSlotIdlePhase": 1,
                            "gdMiniSlot": 5,
                            "gdMiniSlotActionPointOffset": 2,
                            "gdStaticSlot": 31,
                            "gdSymbolWindow": 1,
                            "gdSymbolWindowActionPointOffset": 1,
                            "gdTSSTransmitter": 9,
                            "gdWakeupTxActive": 60,
                            "gdWakeupTxIdle": 180,
                            "gListenNoise": 2,
                            "gMacroPerCycle": 3636,
                            "gMaxWithoutClockCorrectionFatal": 2,
                            "gMaxWithoutClockCorrectionPassive": 2,
                            "gNumberOfMiniSlots": 291,
                            "gNumberOfStaticSlots": 70,
                            "gPayloadLengthStatic": 16,
                            "gSyncFrameIDCountMax": 15
                        },
                        "NodeParameters": {
                            "pAllowHaltDueToClock": 1,
                            "pAllowPassiveToActive": 0,
                            "pChannels": "AB",
                            "pClusterDriftDamping": 2,
                            "pdAcceptedStartupRange": 212,
                            "pdListenTimeout": 400162,
                            "pKeySlotId": 11,
                            "pKeySlotOnlyEnabled": 0,
                            "pKeySlotUsedForStartup": 1,
                            "pKeySlotUsedForSync": 0,
                            "pLatestTx": 249,
                            "pMacroInitialOffsetA": 3,
                            "pMacroInitialOffsetB": 3,
                            "pMicroInitialOffsetA": 6,
                            "pMicroInitialOffsetB": 6,
                            "pMicroPerCycle": 200000,
                            "pOffsetCorrectionOut": 127,
                            "pOffsetCorrectionStart": 3632,
                            "pRateCorrectionOut": 81,
                            "pWakeupChannel": "A",
                            "pWakeupPattern": 33,
                            "pdMicrotick": "25ns",
                            "pSamplesPerMicrotick": 2
                        }
                    }
                ]
            },
            {
                "Name": "NetworkSimulator",

                "ParticipantController": {
                    "SyncType": "DiscreteTime"
                },
                "NetworkSimulators": [ "FlexRay-Simulator" ]
            },
            {
                "Name": "SystemController",

                "Logger": {
                    "FlushLevel": "Warn",
                    "Sinks": [
                        {
                            "Type": "Remote"
                        }
                    ]
                }
            },
            {
                "Name": "SystemMonitor",
                "Description": "Passive SystemMonitor that can be optionally attached. Does not participate in synchronization.",

                "Logger": {
                    "LogFromRemotes": true,
                    "FlushLevel": "Info",
                    "Sinks": [
                        {
                            "Type": "Stdout"
                        }
                    ]
                }
            }
        ],

        "Links": [
            {
                "Name": "FlexRay-Cluster-1",
                "Endpoints": [
                    "Node0/FlexRay1",
                    "Node1/FlexRay1"
                ]
            }
        ],

        "NetworkSimulators": [
            {
                "Name": "FlexRay-Simulator",
                "SimulatedLinks": [
                    "FlexRay-Cluster-1"
                ]
            }
        ],

        "TimeSync": {
            "TickPeriodNs": 1000000
        }

    },

    "MiddlewareConfig": {
        "ActiveMiddleware": "VAsio"
    },

    "LaunchConfigurations": [
        {
            "Name": "Installation",
            "ParticipantEnvironments": [
                {
                    "Participant": "Node0",
                    "Environment": "CustomExecutable",
                    "WorkingFolder": ".",
                    "Executable": "%INTEGRATIONBUS_BINPATH%IbDemoFlexray",
                    "Arguments": "%INTEGRATIONBUS_CONFIGFILE% Node0 %INTEGRATIONBUS_DOMAINID%"
                },
                {
                    "Participant": "Node1",
                    "Environment": "CustomExecutable",
                    "WorkingFolder": ".",
                    "Executable": "%INTEGRATIONBUS_BINPATH%IbDemoFlexray",
                    "Arguments": "%INTEGRATIONBUS_CONFIGFILE% Node1 %INTEGRATIONBUS_DOMAINID%"
                },
                {
                    "Participant": "SystemMonitor",
                    "Environment": "CustomExecutable",
                    "WorkingFolder": ".",
                    "Executable": "%INTEGRATIONBUS_BINPATH%IbSystemMonitor",
                    "Arguments": "%INTEGRATIONBUS_CONFIGFILE% %INTEGRATIONBUS_DOMAINID%"
                },
                {
                    "Participant": "SystemController",
                    "Environment": "CustomExecutable",
                    "WorkingFolder": ".",
                    "Executable": "%INTEGRATIONBUS_BINPATH%IbSystemController",
                    "Arguments": "%INTEGRATIONBUS_CONFIGFILE% %INTEGRATIONBUS_DOMAINID%"
                }
            ]
        }
    ]
}
