{
    "$id": "http://vector.com/#",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "JSON schema for IntegrationBus configuration files",
    "type": "object",

    "definitions": {

        "Description": {
            "type": "string",
            "title": "User readable description for easier recognition and comments.",
            "default": ""
        }

    },
    
    "properties": {
      "$schema": {
        "type": "string",
        "title": "The $schema Schema",
        "default": "",
        "examples": [
          "./IbConfig.schema.json"
        ]
      },

      "ConfigVersion": {
        "type": "string",
        "title": "Version of the Configuration Schema",
        "default": "",
        "examples": [
          "0.0.1"
        ]
      },

      "ConfigName": {
        "type": "string",
        "title": "Name of the Configuration",
        "default": "",
        "examples": [
          "My Configuration"
        ]
      },

      "Description": {
        "$ref": "#/definitions/Description"
      },

      "SimulationSetup": {
        "type": "object",
        "title": "Entities of the simulated system",
        "properties": {

          "Participants": {
            "type": "array",

            "items": {
              "type": "object",
              "properties": {
                "Name": {
                    "type": "string",
                    "title": "Name of the Participant"
                },
                "Description": {
                    "$ref": "#/definitions/Description"
                },
                "SyncType" : {
                  "type": "string",
                    "enum": [ "DistributedTimeQuantum", "DiscreteEvent", "TimeQuantum", "DiscreteTime", "DiscreteTimePassive", "Unsynchronized"]
                },
                "Logger" : {
                  "type": "object",
                  "properties": {
                    "LogFromRemotes": {
                      "type": "boolean",
                      "title": "Enables receiving of remote log messages from other participants"
                    },
                    "FlushLevel": {
                      "type": "string",
                      "enum": [ "Critical", "Error", "Warn", "Info", "Debug", "Trace", "Off"]
                    },
                    "Sinks": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "Type": {
                            "type": "string",
                              "enum": [ "Remote", "File", "Stdout"]
                          },
                          "Level": {
                            "type": "string",
                              "enum": [ "Critical", "Error", "Warn", "Info", "Debug", "Trace", "Off"],
                              "default": "Info"
                          },
                          "Logname": {
                            "type": "string",
                            "title": "Logname of a file logger. The logname results in the following filename: <Logname>_%y-%m-%dT%h-%m-%s.txt"
                          }
                        },
                        "additionalProperties": false,
                        "required": [ "Type" ]
                      }
                    }
                  },
                  "additionalProperties": false,
                  "required": [ "Sinks" ]
                },
                "ParticipantController" : {
                  "type": "object",
                  "properties": {
                    "SyncType" : {
                      "type": "string",
                        "enum": [ "DistributedTimeQuantum", "DiscreteEvent", "TimeQuantum", "DiscreteTime", "DiscreteTimePassive"]
                    },
                    "ExecTimeLimitSoftMs": {
                      "type": "integer",
                      "title": "When a SimTask is not finished before this limit, a warning is logged. Optional. Unit is in Milliseconds."
                    },
                    "ExecTimeLimitHardMs": {
                      "type": "integer",
                      "title": "When a SimTask is not finished before this limit, the participant controller switches to error state. Optional. Unit is in Milliseconds."
                    }
                  },
                  "additionalProperties": false,
                  "required": [ "SyncType" ]
                },
                "CanControllers": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                          "Name": {
                              "type": "string",
                              "title": "Name of the CanController instance"
                          },
                          "UseTraceSinks": {
                              "type" : "array",
                              "title": "Names of trace sinks"
                          }
                      }
                  }
                },
                "LinControllers": {
                  "type": "array",
                  "items": {
                      "type": "object",
                      "properties": {
                          "Name": {
                              "type": "string",
                              "title": "Name of the LinController instance"
                          },
                          "UseTraceSinks": {
                              "type" : "array",
                              "title": "Names of trace sinks"
                          }
                      }
                  }
                },
                "FlexRayControllers": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the FlexRayController instance"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      },
                      "ClusterParameters": {
                        "type": "object",
                        "properties": {
                          "gColdstartAttempts": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 31,
                            "title": "Number of attempts for a cold start before giving up (range 2-31)"
                          },
                          "gCycleCountMax": {
                            "type": "integer",
                            "minimum": 7,
                            "maximum": 63,
                            "title": "Max cycle count value in a given cluster (range 7-63, must be an odd integer)"
                          },
                          "gdActionPointOffset": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 63,
                            "title": "time offset for a static slot in MacroTicks (MT) (range 1-63)"
                          },
                          "gdDynamicSlotIdlePhase": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 2,
                            "title": "Duration of the idle phase within a dynamic slot in gdMiniSlots (range 0 - 2)"
                          },
                          "gdMiniSlot": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 63,
                            "title": "Duration of a mini slot in MacroTicks (MT) (2-63)"
                          },
                          "gdMiniSlotActionPointOffset": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 31,
                            "title": "Time offset for a mini slot in MacroTicks (MT) (range 1- 31)"
                          },
                          "gdStaticSlot": {
                            "type": "integer",
                            "minimum": 3,
                            "maximum": 664,
                            "title": "Duration of a static slot in MacroTicks (MT) (3-664)"
                          },
                          "gdSymbolWindow": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 162,
                            "title": "Duration of the symbol window in MacroTicks (MT) (range 0-162)"
                          },
                          "gdSymbolWindowActionPointOffset": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 63,
                            "title": "Time offset for a static symbol windows in MacroTicks (MT) (range 1-63)"
                          },
                          "gdTSSTransmitter": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 15,
                            "title": "Duration of TSS (Transmission Start Sequence) in gdBits (range 1-15)"
                          },
                          "gdWakeupTxActive": {
                            "type": "integer",
                            "minimum": 15,
                            "maximum": 60,
                            "title": "Duration of LOW Phase of a wakeup symbol in gdBit (range 15 - 60)"
                          },
                          "gdWakeupTxIdle": {
                            "type": "integer",
                            "minimum": 45,
                            "maximum": 180,
                            "title": "Duration of the idle of a wakeup symbol in gdBit (45 - 180)"
                          },
                          "gListenNoise": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 16,
                            "title": "Upper limit for the startup listen timeout and wakeup listen timeout in the presence of noise. Used as a multiplier of pdListenTimeout. (range 2 - 16)"
                          },
                          "gMacroPerCycle": {
                            "type": "integer",
                            "minimum": 8,
                            "maximum": 16000,
                            "title": "Number of MacroTicks (MT) per cycle, (range 8 - 16000)"
                          },
                          "gMaxWithoutClockCorrectionFatal": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 15,
                            "title": "Threshold used for testing the vClockCorrectionFailed counter (range 1-15)"
                          },
                          "gMaxWithoutClockCorrectionPassive": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 15,
                            "title": "Threshold used for testing the vClockCorrectionFailed counter (range 1-15)"
                          },
                          "gNumberOfMiniSlots": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 7988,
                            "title": "Number of mini slots (range 0-7988)"
                          },
                          "gNumberOfStaticSlots": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 1023,
                            "title": "Number of static slots in a cycle (range 2-1023)"
                          },
                          "gPayloadLengthStatic": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 127,
                            "title": "Length of the payload of a static frame in 16-Bits words (range 0 - 127)"
                          },
                          "gSyncFrameIDCountMax": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 15,
                            "title": "Max number of distinct sync frame identifiers present in a given cluster. (range 2 - 15)"
                          }
                        }
                      },
                      "NodeParameters": {
                        "type": "object",
                        "properties": {
                          "pAllowHaltDueToClock": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "title": "Controls the transition to halt state due to clock synchronization errors. (0,1)"
                          },
                          "pAllowPassiveToActive": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 31,
                            "title": "Required number of consecutive even / odd cycle pairs for normal passive to normal active (range 0-31)"
                          },
                          "pChannels": {
                            "type": "string",
                            "enum": ["A", "B", "AB", "None"],
                            "title": "Channel(s) to which the controller is connected"
                          },
                          "pClusterDriftDamping": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 10,
                            "title": "Cluster drift damping factor for rate correction in Microticks (range 0 - 10)"
                          },
                          "pdAcceptedStartupRange": {
                            "type": "integer",
                            "minimum": 29,
                            "maximum": 2743,
                            "title": "Allowed deviation for startup frames during integration in MicroTicks (range 29 - 2743)"
                          },
                          "pdListenTimeout": {
                            "type": "integer",
                            "minimum": 1926,
                            "maximum": 2567692,
                            "title": "Duration of listen phase in MicroTicks (range 1926 - 2567692)"
                          },
                          "pKeySlotId": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1023,
                            "title": "Slot ID of the key slot (range 0-1023, value 0 means that there is no key slot)"
                          },
                          "pKeySlotOnlyEnabled": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "title": "Shall the node enter key slot only mode after startup. (values 0, 1) (AUTOSAR pSingleSlotEnabled)"
                          },
                          "pKeySlotUsedForStartup": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "title": "Key slot is used for startup (range 0, 1)"
                          },
                          "pKeySlotUsedForSync": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "title": "Key slot is used for sync (range 0, 1)"
                          },
                          "pLatestTx": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 7988,
                            "title": "Last mini slot which can be transmitted (range 0-7988)"
                          },
                          "pMacroInitialOffsetA": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 68,
                            "title": "Initial startup offset for frame reference point on channel A (rang 2-68 MacroTicks (MT))"
                          },
                          "pMacroInitialOffsetB": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 68,
                            "title": "Initial startup offset for frame reference point on channel B (rang 2-68 MacroTicks (MT))"
                          },
                          "pMicroInitialOffsetA": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 239,
                            "title": "Offset between secondary time reference and MT boundary (range 0 - 239 Microticks)"
                          },
                          "pMicroInitialOffsetB": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 239,
                            "title": "Offset between secondary time reference and MT boundary (range 0 - 239 Microticks)"
                          },
                          "pMicroPerCycle": {
                            "type": "integer",
                            "minimum": 960,
                            "maximum": 1280000,
                            "title": "Nominal number of microticks in the communication cycle (range 960 - 1280000)"
                          },
                          "pOffsetCorrectionOut": {
                            "type": "integer",
                            "minimum": 15,
                            "maximum": 16082,
                            "title": "Maximum permissible offset correction value (range 15 - 16082 Microticks)"
                          },
                          "pOffsetCorrectionStart": {
                            "type": "integer",
                            "minimum": 7,
                            "maximum": 15999,
                            "title": "Start of the offset correction phase within the NIT, (7 - 15999 MT)"
                          },
                          "pRateCorrectionOut": {
                            "type": "integer",
                            "minimum": 3,
                            "maximum": 3846,
                            "title": "Maximum permissible rate correction value (range 3 - 3846 Microticks)"
                          },
                          "pWakeupChannel": {
                            "type" : "string",
                            "enum": ["A", "B"],
                            "title": "Channel used by the node to send a wakeup pattern"
                          },
                          "pWakeupPattern": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 63,
                            "title": "Number of repetitions of the wakeup symbol (range 0-63, value 0 or 1 prevents sending of WUP)"
                          },
                          "pdMicrotick": {
                            "type": "string",
                            "enum": ["12.5ns", "25ns", "50ns"],
                            "title": "Duration of a FlexRay microtick"
                          },
                          "pSamplesPerMicrotick": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 2,
                            "title": "Number of samples per microtick (values 1 or 2)"
                          }
                        }
                      },
                      "TxBufferConfigs": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "channels": {
                              "type": "string",
                              "enum": ["A", "B", "AB", "None"],
                              "title": "Channel(s)"
                            },
                            "slotId": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 65535,
                              "title": "The slot Id of frame"
                            },
                            "offset": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 63,
                              "title": "Base offset for cycle multiplexing (values 0-63)"
                            },
                            "repetition": {
                              "type": "integer",
                              "minimum": 0,
                              "maximum": 64,
                              "title": "Repetition for cycle multiplexing (values 1,2,4,8,16,32,64)"
                            },
                            "PPindicator": {
                              "type": "boolean",
                              "title": "Set the PPindicator"
                            },
                            "headerCrc": {
                              "type": "integer",
                              "title": "Header CRC, 11 bits"
                            },
                            "transmissionMode": {
                              "type": "string",
                              "enum" : ["SingleShot", "Continuous"],
                              "title": "SingleShot or Continuous transmission mode"
                            }
                          }
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "EthernetControllers": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the EthernetController instance"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      },
                      "MacAddr": {
                        "type": "string",
                        "pattern": "^([0-9A-Z]{2}:){5}[0-9-A-Z]{2}$",
                        "title": "Colon-separated MAC-Address",
                        "examples": [
                          "F7:04:68:71:AA:A0"
                        ]
                      },
                      "PcapFile": {
                        "type": "string",
                        "title": "Name of the file capturing the PCAP trace",
                        "examples": [
                          "EthernetWriter.pcap"
                        ]
                      },
                      "PcapPipe": {
                        "type": "string",
                        "title": "Name of the pipe capturing the PCAP trace",
                        "examples": [
                          "EthernetWriterPipe"
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "Digital-Out": {
                  "type": "array",
                  "title": "Digital output ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Digital-Out port"
                      },
                      "UseTraceSinks": {
                          "type" : "array",
                          "title": "Names of trace sinks"
                      },
                      "value": {
                        "type": "boolean",
                        "title": "Name and init value of a digital output"
                      }
                    }
                  }
                },
                "Analog-Out": {
                  "type": "array",
                  "title": "Analog output ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Analog-Out port"
                      },
                      "UseTraceSinks": {
                          "type" : "array",
                          "title": "Names of trace sinks"
                      },
                      "value": {
                        "type": "number",
                        "title": "Initial value of the output port"
                      },
                      "unit": {
                        "type": "string",
                        "title": "Physical unit of the output port value.",
                        "examples": [ "V", "A", "kHz" ]
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "Pwm-Out": {
                  "type": "array",
                  "title": "PWM output ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Pwm-Out port"
                      },
                      "UseTraceSinks": {
                          "type" : "array",
                          "title": "Names of trace sinks"
                      },
                      "freq": {
                        "type": "object",
                        "title": "Frequency and unit of the PWM output.",
                        "properties": {
                          "value":{
                            "type": "number"
                          },
                          "unit":{
                            "type": "string",
                            "enum": [ "Hz", "kHz", "MHz", "GHz", "THz"]
                          }
                        },
                        "additionalProperties": false
                      },
                      "duty": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 1,
                        "title": "Duty cycle of the PWM output.",
                        "examples": [ "V", "A", "kHz" ]
                      }
                    },
                    "additionalProperties": false,
                    "title": "Name and init value of an analog output"
                  }
                },
                "Pattern-Out":{
                  "type": "array",
                  "title": "Pattern output ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Pattern-Out port"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      },
                      "value": {
                        "type": "string",
                        "pattern": "^[0-9a-zA-Z]*$",
                        "title": "Name and hex encoded init value of a pattern output"
                      }
                    }
                  }
                },

                "Digital-In": {
                  "type": "array",
                  "title": "Digital input ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Digital-In port"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      }
                    }
                  }
                },
                "Analog-In": {
                  "type": "array",
                  "title": "Analog input ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Analog-In port"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      }
                    }
                  }
                },
                "Pwm-In": {
                  "type": "array",
                  "title": "PWM input ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Pwm-In port"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      }
                    }
                  }
                },
                "Pattern-In": {
                  "type": "array",
                  "title": "Pattern input ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Pattern-In port"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      }
                    }
                  }
                },

                "GenericPublishers": {
                  "type":"array",
                  "items": {
                    "type":"object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the generic message publisher"
                      },
                      "Protocol": {
                        "type": "string",
                        "enum": [
                          "Undefined",
                          "ROS",
                          "SOME/IP"
                        ],
                        "default": "Undefined"
                      },
                      "DefinitionUri": {
                        "type": "string",
                        "title": "Location of the corresponding message definition file. Relative paths refer to the location of the IbConfig file.",
                        "format": "uri"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      }
                    },
                    "additionalProperties": false,
                    "required": [ "Name" ]
                  }
                },

                "GenericSubscribers": {
                  "type": "array",
                  "title": "Name of generic message subscriber",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Generic Subscriber"
                      },
                      "UseTraceSinks": {
                        "type" : "array",
                        "title": "Names of trace sinks"
                      }
                    }
                  }
                },

                "NetworkSimulators": {
                    "type": "array",
                    "items":{
                      "type": "string",
                      "title": "Names of the network simulators located at this participant"
                    }
                },
                "IsSyncMaster": {
                    "type": "boolean"
                },
                "TraceSinks": {
                  "type" : "array",
                  "items" : {
                    "type":  "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Trace Sink",
                        "examples": [
                          "SomeEthernetSink"
                        ]
                      },
                      "OutputPath": {
                        "type": "string",
                        "title": "File path of output file"
                      },
                      "Type": {
                        "type": "string",
                        "enum": [
                          "PcapFile",
                          "PcapPipe",
                          "Mdf4File"
                        ],
                        "title": "File format specifier"
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "Switches": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "Name": {
                  "type": "string",
                  "title": "Name of the Ethernet Switch",
                  "examples": [
                    "Switch1"
                  ]
                },
                "Description": {
                  "$ref": "#/definitions/Description"
                },
                "Ports": {
                  "type": "array",
                  "title": "Switch Ports",
                  "items": {
                    "type": "object",
                    "properties": {
                      "Name": {
                        "type": "string",
                        "title": "Name of the Switch Port",
                        "examples": [
                          "Port0"
                        ]
                      },
                      "VlanIds": {
                        "type": "array",
                        "title": "List of VLAN IDs",
                        "items": {
                          "type": "integer"
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "Links": {

            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "Name": {
                  "type": "string",
                  "title": "Unique name of the Link",
                  "examples": [
                    "CAN1",
                    "LIN1",
                    "FlexRay1",
                    "Ethernet1",
                    "Switch0-Port0"
                  ]
                },
                "Endpoints": {
                  "type": "array",
                  "title": "List of connected controllers, IO-ports and switch ports. Must be fully qualified.",
                  "items": {
                    "type": "string",
                    "pattern": "^[^/]+/[^/]+",
                    "default": "",
                    "examples": [
                      "Participant1/ETH1",
                      "Switch1/Port0"
                    ]
                  }
                }
              },
              "additionalProperties": false
            }
          },

          "NetworkSimulators": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "Name": {
                  "type": "string",
                  "title": "Name of the Network Simulator Instance"
                },
                "SimulatedLinks": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "SimulatedSwitches": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            }
          },

          "TimeSync": {
            "type": "object",
            "title": "Time synchronization",
            "properties": {
              "SyncPolicy": {
                "type": "string",
                "title": "Synchronization Policy (Loose/Strict)",
                "description": "This setting determines whether to wait until data is delivered to other participants (=Strict) or not (=Loose). The default is Loose.",
                "enum": [
                  "Loose",
                  "Strict"
                ],
                "default": "Loose",
                "examples": [
                  "Loose"
                ]
              },
              "TickPeriodNs":{
                "type": "integer",
                "title": "Tick period in nano seconds for DiscreteTime synchronization"
              }
            },
            "additionalProperties": false            
          }
        },
        "additionalProperties": false
      },

      "MiddlewareConfig": {
        "type": "object", 
        "title": "Configuration of the simulation middleware", 
        "properties": {

          "ActiveMiddleware" :
          {
            "type": "string",
            "enum": ["FastRTPS", "VAsio"],
            "title": "ActiveMiddleware"
          },

          "FastRTPS": {
            "type": "object", 
            "title": "FastRTPS settings", 
            "properties": {
              "DiscoveryType": {
                "type":"string",
                "enum": [ 
                  "Local",
                  "Unicast",
                  "Multicast",
                  "ConfigFile"
                ],
                "default": "Local",
                "title": "The FastRTPS participant discovery mechanism",
                "description": "This setting determines how FastRTPS performs participant discovery; Local limits discovery to the localhost, Multicast is the FastRTPS default using dynamic discovery, Unicast allows specifying the participant IPs manually, and ConfigFile uses participant discovery according to the specified FastRTPS.xml."
              },
              "UnicastLocators": {
                "type": "object",
                "title": "The IP addresses of participants for unicast discovery.",
                "description": "When using DiscoveryType=Unicast, the UnicastLocators must list an IP address for each participant.",
                "patternProperties": {
                  "^.*$": {
                    "type": "string",
                    "format": "ip-address",
                    "title": "IP4-Address of a participant"
                  }
                }
              },

              "ConfigFileName": {
                "type": "string", 
                "title": "The file name of an optional FastRTPS XML file with profiles to use for the participants, relative to the JSON config file", 
                "default": "", 
                "examples": [
                  "Custom_FastRtps_Profile.xml"
                ], 
                "pattern": "^(.*)$"
              },

              "SendSocketBufferSize": {
                "type": "integer",
                "default": -1
              },
              "ListenSocketBufferSize": {
                "type": "integer",
                "default": -1
              },
              "HistoryDepth": {
                "type": "integer"
              }
            },
            "additionalProperties": false
          },

          "VAsio": {
            "type": "object",
            "title": "VAsio settings",
            "properties": {
              "Registry": {
                "type": "object",
                "title": "The registry used for the VAsio middleware.",
                "properties": {
                  "Hostname": {
                    "type": "string",
                    "default": "localhost"
                  },
                  "Port": {
                    "type": "integer",
                    "default": "8500"
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }

        },
        "additionalProperties": false
      },

      "LaunchConfigurations": {
        "type": "array", 
        "title": "Configurations for the launcher", 

        "items": {
          "type": "object",
          "properties": {
            "Name": {
              "type": "string",
              "title": "Name of the LaunchConfiguration"
            },
            "Description": {
              "$ref": "#/definitions/Description"
            },
            "NetworkNodes": {
              "type": "array", 
              "title": "Nodes to deploy to", 
              "items": {
                "type": "object",
                "properties": {
                  "Name": {
                    "type": "string",
                    "title": "Name of the LaunchConfiguration"
                  },
                  "Platform": {
                    "type": "string",
                    "title": "Platform of the target"
                  },
                  "Ipv4Address": {
                    "type": "string",
                    "title": "Endpoint ethernet address"
                  },
                  "SshPort": {
                    "type": "string",
                    "title": "Endpoint ethernet port for SSH access"
                  }
                },
                "additionalProperties": false
              }
            },
            "ParticipantEnvironments": {
              "type": "array", 
              "title": "Configuring the execution environment of participants", 
              "items": {
                "type": "object",
                "properties": {
                  "Participant": {
                    "type": "string",
                    "title": "Name of the Participant to deploy"
                  },
                  "Environment": {
                    "type": "string",
                    "title": "Type of the Environment where the Participant is executed",
                    "enum": ["CANoe", "ExecutionController", "CustomExecutable"]
                  },
                  "NetworkNode": {
                    "type": "string",
                    "title": "Name of the NetworkNode to deploy the Participant to"
                  },
                  "WorkingFolder": {
                    "type": "string",
                    "title": "Name of the WorkingFolder where the Participant is executed"
                  }
                },
                "required": [ "Participant", "Environment" ],

                "oneOf": [
                  {
                    "properties": {
                      "Participant": { },
                      "Environment": { "enum": [ "CANoe" ] },
                      "NetworkNode": { },
                      "CANoeProject": {
                        "type": "string",
                        "title": "The CANoeProject project file (.cfg) to load"
                      },
                      "WorkingFolder": { }
                    },
                    "additionalProperties": false,
                    "required": [ "CANoeProject", "WorkingFolder" ]
                  },
                  {
                    "properties": {
                      "Participant": { },
                      "Environment": {"enum": ["ExecutionController"] },
                      "NetworkNode": { }
                    },
                    "additionalProperties": false
                  },
                  {
                    "properties": {
                      "Participant": { },
                      "Environment": {"enum": ["CustomExecutable"] },
                      "NetworkNode": { },
                      "Executable": {
                        "type": "string",
                        "title": "The file to execute on the shell"
                      },
                      "Arguments": {
                        "type": "string",
                        "title": "Optional command line arguments"
                      },
                      "WorkingFolder": { }
                    },
                    "additionalProperties": false,
                    "required": [ "Executable", "WorkingFolder" ]
                  }
                ]
              }
            }
          },
          "additionalProperties": false,
          "required": [ "Name", "ParticipantEnvironments" ]
        }
      }

    },
    "additionalProperties": false
  }
