<?xml version="1.0" encoding="UTF-8" ?>
<!-- Test objective: Ensure that we can modify the system's default socket buffer size. -->
<profiles>
   <participant profile_name="Publisher">
      <rtps>
         <name>Publisher</name>
         <port>10042</port>
         <builtin>
            <domainId>42</domainId>
            <leaseDuration>INFINITE</leaseDuration>
            <EDP>SIMPLE</EDP>
            <simpleEDP>
               <PUBWRITER_SUBREADER>true</PUBWRITER_SUBREADER>
               <PUBREADER_SUBWRITER>true</PUBREADER_SUBWRITER>
            </simpleEDP>
            <use_SIMPLE_RTPS_PDP>true</use_SIMPLE_RTPS_PDP>
         </builtin>
<!-- BEGIN: DIFFERENCE TO DEFAULT RUNTIME CONFIGURATION -->
         <sendSocketBufferSize>1048576</sendSocketBufferSize>
         <listenSocketBufferSize>4194304</listenSocketBufferSize>
<!-- END: DIFFERENCE TO DEFAULT RUNTIME CONFIGURATION -->
      </rtps>
   </participant>
   <publisher profile_name="Publisher-GenericMessage-TestTopic">
      <topic>
         <kind>WITH_KEY</kind>
         <dataType>ib::sim::generic::idl::GenericMessage</dataType>
         <name>TestTopic</name>
         <historyQos>
            <kind>KEEP_LAST</kind><!-- KEEP_LAST_HISTORY_QOS -->
            <depth>10</depth>
         </historyQos>
         <resourceLimitsQos>
            <max_instances>5</max_instances>
            <max_samples_per_instance>10</max_samples_per_instance>
            <max_samples>50</max_samples>
            <allocated_samples>20</allocated_samples>
         </resourceLimitsQos>
      </topic>
      <times>
        <heartbeatPeriod>
            <sec>2</sec>
        </heartbeatPeriod>
      </times>
      <historyMemoryPolicy>PREALLOCATED_WITH_REALLOC</historyMemoryPolicy> <!-- PREALLOCATED_WITH_REALLOC_MEMORY_MODE -->
      <qos>
         <durability>
            <kind>TRANSIENT_LOCAL</kind> <!-- TRANSIENT_LOCAL_DURABILITY_QOS -->
         </durability>
         <reliability>
            <kind>RELIABLE</kind> <!-- RELIABLE_RELIABILITY_QOS -->
         </reliability>
      </qos>
   </publisher>   
   <subscriber profile_name="Publisher-LogMsg-default">
      <topic>
         <kind>WITH_KEY</kind>
         <dataType>ib::mw::logging::idl::LogMsg</dataType>
         <name>default</name>
      </topic>
   </subscriber>
   <publisher profile_name="Publisher-LogMsg-default">
      <topic>
         <kind>WITH_KEY</kind>
         <dataType>ib::mw::logging::idl::LogMsg</dataType>
         <name>default</name>
      </topic>
      <times>
        <heartbeatPeriod>
            <sec>1</sec>
        </heartbeatPeriod>
      </times>
   </publisher>   
   
   <participant profile_name="Subscriber">
      <rtps>
         <name>Subscriber</name>
         <port>10042</port>
         <builtin>
            <domainId>42</domainId>
            <leaseDuration>INFINITE</leaseDuration>
            <EDP>SIMPLE</EDP>
            <simpleEDP>
               <PUBWRITER_SUBREADER>true</PUBWRITER_SUBREADER>
               <PUBREADER_SUBWRITER>true</PUBREADER_SUBWRITER>
            </simpleEDP>
            <use_SIMPLE_RTPS_PDP>true</use_SIMPLE_RTPS_PDP>
         </builtin>
<!-- BEGIN: DIFFERENCE TO DEFAULT RUNTIME CONFIGURATION -->
         <sendSocketBufferSize>1048576</sendSocketBufferSize>
         <listenSocketBufferSize>4194304</listenSocketBufferSize>
<!-- END: DIFFERENCE TO DEFAULT RUNTIME CONFIGURATION -->
      </rtps>
   </participant>
   <subscriber profile_name="Subscriber-GenericMessage-TestTopic">
      <topic>
         <kind>WITH_KEY</kind>
         <dataType>ib::sim::generic::idl::GenericMessage</dataType>
         <name>TestTopic</name>
         <historyQos>
            <kind>KEEP_LAST</kind><!-- KEEP_LAST_HISTORY_QOS -->
            <depth>10</depth>
         </historyQos>
         <resourceLimitsQos>
            <max_instances>5</max_instances>
            <max_samples_per_instance>10</max_samples_per_instance>
            <max_samples>50</max_samples>
            <allocated_samples>20</allocated_samples>
         </resourceLimitsQos>
      </topic>
      <historyMemoryPolicy>PREALLOCATED_WITH_REALLOC</historyMemoryPolicy> <!-- PREALLOCATED_WITH_REALLOC_MEMORY_MODE -->
      <qos>
         <durability>
            <kind>TRANSIENT_LOCAL</kind> <!-- TRANSIENT_LOCAL_DURABILITY_QOS -->
         </durability>
         <reliability>
            <kind>RELIABLE</kind> <!-- RELIABLE_RELIABILITY_QOS -->
         </reliability>
      </qos>
   </subscriber>
   <subscriber profile_name="Subscriber-LogMsg-default">
      <topic>
         <kind>WITH_KEY</kind>
         <dataType>ib::mw::logging::idl::LogMsg</dataType>
         <name>default</name>
      </topic>
   </subscriber>
   <publisher profile_name="Subscriber-LogMsg-default">
      <topic>
         <kind>WITH_KEY</kind>
         <dataType>ib::mw::logging::idl::LogMsg</dataType>
         <name>default</name>
      </topic>
      <times>
        <heartbeatPeriod>
            <sec>1</sec>
        </heartbeatPeriod>
      </times>
   </publisher>   
</profiles>
